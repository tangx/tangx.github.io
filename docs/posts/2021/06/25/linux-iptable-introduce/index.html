<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>iptables详解：iptables概念 | 老麦的书房</title><meta property="og:title" content="iptables详解：iptables概念 - 老麦的书房"><meta property="og:type" content="article"><meta property="article:published_time" content="2021-06-25T00:00:00+08:00"><meta property="article:modified_time" content="2021-06-25T00:00:00+08:00"><meta name=Keywords content="[iptables]"><meta name=description content="这篇文章会尽量以通俗易懂的方式描述iptables的相关概念，请耐心的读完它。"><meta name=author content="老麦"><meta property="og:url" content="https://typonotes.com/posts/2021/06/25/linux-iptable-introduce/"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=stylesheet href=/css/normalize.css><link rel=stylesheet href=/css/style.css><script type=text/javascript src=https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.4.1/jquery.min.js></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5359126171348711" crossorigin=anonymous></script>
<script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?fe891ffeb313a7d084b8baf803d87746",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-V3S2RT0KBC"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-V3S2RT0KBC")</script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><a id=logo href=https://typonotes.com/>老麦的书房</a><p class=description>Go语言(golang)、 云原生、 DevOps、 可视化追踪。 React 入门。</p></div><div><nav id=nav-menu class=clearfix><a class=current href=https://typonotes.com/>首页</a>
<a href=https://typonotes.com/books/ title=开源书>开源书</a>
<a href=https://typonotes.com/categories/ title=分类>分类</a>
<a href=https://typonotes.com/tags/ title=标签>标签</a>
<a href=https://typonotes.com/links/ title=友链>友链</a></nav></div></div></div></header><div id=body><div class=container><div style=margin:10px></div><div class=col-group><div class=col-8 id=main><div style="margin:5px 0"><form id=search action=https://typonotes.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=Search>
<input type=hidden name=sitesearch value=https://typonotes.com/>
<button type=submit class="submit icon-search"></button></form></div><div class=res-cons><style type=text/css>.post-toc{position:fixed;width:200px;margin-left:-210px;padding:5px 10px;font-family:Athelas,STHeiti,Microsoft Yahei,serif;font-size:12px;border:1px solid rgba(0,0,0,7%);border-radius:5px;background-color:rgba(255,255,255,.98);background-clip:padding-box;-webkit-box-shadow:1px 1px 2px rgba(0,0,0,.125);box-shadow:1px 1px 2px rgba(0,0,0,.125);word-wrap:break-word;white-space:nowrap;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:999;cursor:pointer;max-height:70%;overflow-y:auto;overflow-x:hidden}.post-toc .post-toc-title{width:100%;margin:0 auto;font-size:20px;font-weight:400;text-transform:uppercase;text-align:center}.post-toc .post-toc-content{font-size:15px}.post-toc .post-toc-content>nav>ul{margin:10px 0}.post-toc .post-toc-content ul{padding-left:20px;list-style:square;margin:.5em;line-height:1.8em}.post-toc .post-toc-content ul ul{padding-left:15px;display:none}@media print,screen and (max-width:1057px){.post-toc{display:none}}</style><div class=post-toc style=position:absolute;top:188px><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#防火墙相关概念>防火墙相关概念</a></li><li><a href=#iptables基础>iptables基础</a></li><li><a href=#链的概念>链的概念</a></li><li><a href=#表的概念>表的概念</a></li><li><a href=#表链关系>表链关系</a></li><li><a href=#数据经过防火墙的流程>数据经过防火墙的流程</a></li><li><a href=#规则的概念>规则的概念</a></li></ul></nav></div></div><script type=text/javascript>$(document).ready(function(){if(e=$(".post-toc"),e.length){t=$("#main").offset().left,t<220&&e.css({width:t-10,"margin-left":0-t});var e,t,n=e.offset().top-20,s={start:{position:"absolute",top:n},process:{position:"fixed",top:20}};$(window).scroll(function(){var t=$(window).scrollTop();t<n?e.css(s.start):e.css(s.process)})}$("#TableOfContents").children().length<1&&$(".post-toc").remove()})</script><article class=post><header><h1 class=post-title>iptables详解：iptables概念</h1></header><time datetime=2021-06-25T00:00:00Z class="post-meta meta-date dt-published">2021年6月25日</time><div class=post-meta><span id=busuanzi_container_page_pv>&nbsp;|
<span id=busuanzi_value_page_pv></span> <span>阅读</span></span></div><div class=post-content><h1 id=iptables详解iptables概念>iptables详解：iptables概念</h1><p>原文作者: 朱双印
原文链接:
<a href=https://www.zsythink.net/archives/1199 target=_blank rel=noopener>https://www.zsythink.net/archives/1199</a></p><p>这篇文章会尽量以通俗易懂的方式描述iptables的相关概念，请耐心的读完它。</p><h2 id=防火墙相关概念>防火墙相关概念</h2><p>此处先描述一些相关概念。</p><p>从逻辑上讲。防火墙可以大体分为主机防火墙和网络防火墙。</p><p>主机防火墙：针对于单个主机进行防护。</p><p>网络防火墙：往往处于网络入口或边缘，针对于网络入口进行防护，服务于防火墙背后的本地局域网。</p><p>网络防火墙和主机防火墙并不冲突，可以理解为，网络防火墙主外（集体）， 主机防火墙主内（个人）。</p><p>从物理上讲，防火墙可以分为硬件防火墙和软件防火墙。</p><p>硬件防火墙：在硬件级别实现部分防火墙功能，另一部分功能基于软件实现，性能高，成本高。</p><p>软件防火墙：应用软件处理逻辑运行于通用硬件平台之上的防火墙，性能低，成本低。</p><p><img class=mx-auto alt=iptables.png src=https://www.zsythink.net/wp-content/uploads/ueditor/php/upload/image/20170212/1486863972980583.png></p><p>那么在此处，我们就来聊聊Linux的iptables</p><p>iptables其实不是真正的防火墙，我们可以把它理解成一个客户端代理，用户通过iptables这个代理，将用户的安全设定执行到对应的”安全框架”中，这个”安全框架”才是真正的防火墙，这个框架的名字叫netfilter</p><p>netfilter才是防火墙真正的安全框架（framework），netfilter位于内核空间。</p><p>iptables其实是一个命令行工具，位于用户空间，我们用这个工具操作真正的框架。</p><p>netfilter/iptables（下文中简称为iptables）组成Linux平台下的包过滤防火墙，与大多数的Linux软件一样，这个包过滤防火墙是免费的，它可以代替昂贵的商业防火墙解决方案，完成封包过滤、封包重定向和网络地址转换（NAT）等功能。</p><p>Netfilter是Linux操作系统核心层内部的一个数据包处理模块，它具有如下功能：</p><p>网络地址转换(Network Address Translate)</p><p>数据包内容修改</p><p>以及数据包过滤的防火墙功能</p><p>所以说，虽然我们使用service iptables start启动iptables”服务”，但是其实准确的来说，iptables并没有一个守护进程，所以并不能算是真正意义上的服务，而应该算是内核提供的功能。</p><h2 id=iptables基础>iptables基础</h2><p>我们知道iptables是按照规则来办事的，我们就来说说规则（rules），规则其实就是网络管理员预定义的条件，规则一般的定义为”如果数据包头符合这样的条件，就这样处理这个数据包”。规则存储在内核空间的信息包过滤表中，这些规则分别指定了源地址、目的地址、传输协议（如TCP、UDP、ICMP）和服务类型（如HTTP、FTP和SMTP）等。当数据包与规则匹配时，iptables就根据规则所定义的方法来处理这些数据包，如放行（accept）、拒绝（reject）和丢弃（drop）等。配置防火墙的主要工作就是添加、修改和删除这些规则。</p><p>这样说可能并不容易理解，我们来换个容易理解的角度，从头说起.</p><p>当客户端访问服务器的web服务时，客户端发送报文到网卡，而tcp/ip协议栈是属于内核的一部分，所以，客户端的信息会通过内核的TCP协议传输到用户空间中的web服务中，而此时，客户端报文的目标终点为web服务所监听的套接字（IP：Port）上，当web服务需要响应客户端请求时，web服务发出的响应报文的目标终点则为客户端，这个时候，web服务所监听的IP与端口反而变成了原点，我们说过，netfilter才是真正的防火墙，它是内核的一部分，所以，如果我们想要防火墙能够达到”防火”的目的，则需要在内核中设置关卡，所有进出的报文都要通过这些关卡，经过检查后，符合放行条件的才能放行，符合阻拦条件的则需要被阻止，于是，就出现了input关卡和output关卡，而这些关卡在iptables中不被称为”关卡”,而被称为”链”。</p><p><img class=mx-auto alt=netfilter-chain.png src=https://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_1.png></p><p>其实我们上面描述的场景并不完善，因为客户端发来的报文访问的目标地址可能并不是本机，而是其他服务器，当本机的内核支持IP_FORWARD时，我们可以将报文转发给其他服务器，所以，这个时候，我们就会提到iptables中的其他”关卡”，也就是其他”链”，他们就是 “路由前”、”转发”、”路由后”，他们的英文名是</p><p>PREROUTING、FORWARD、POSTROUTING</p><p>也就是说，当我们启用了防火墙功能时，报文需要经过如下关卡，也就是说，根据实际情况的不同，报文经过”链”可能不同。如果报文需要转发，那么报文则不会经过input链发往用户空间，而是直接在内核空间中经过forward链和postrouting链转发出去的。</p><p><img class=mx-auto alt=netfilter-chain-2.png src=https://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_2.png></p><p>所以，根据上图，我们能够想象出某些常用场景中，报文的流向：</p><p>到本机某进程的报文：PREROUTING –> INPUT</p><p>由本机转发的报文：PREROUTING –> FORWARD –> POSTROUTING</p><p>由本机的某进程发出报文（通常为响应报文）：OUTPUT –> POSTROUTING</p><h2 id=链的概念>链的概念</h2><p>现在，我们想象一下，这些”关卡”在iptables中为什么被称作”链”呢？我们知道，防火墙的作用就在于对经过的报文匹配”规则”，然后执行对应的”动作”,所以，当报文经过这些关卡的时候，则必须匹配这个关卡上的规则，但是，这个关卡上可能不止有一条规则，而是有很多条规则，当我们把这些规则串到一个链条上的时候，就形成了”链”,所以，我们把每一个”关卡”想象成如下图中的模样 ，这样来说，把他们称为”链”更为合适，每个经过这个”关卡”的报文，都要将这条”链”上的所有规则匹配一遍，如果有符合条件的规则，则执行规则对应的动作。</p><p><img class=mx-auto alt=021217_0051_3 src=https://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_3.png></p><h2 id=表的概念>表的概念</h2><p>我们再想想另外一个问题，我们对每个”链”上都放置了一串规则，但是这些规则有些很相似，比如，A类规则都是对IP或者端口的过滤，B类规则是修改报文，那么这个时候，我们是不是能把实现相同功能的规则放在一起呢，必须能的。</p><p>我们把具有相同功能的规则的集合叫做”表”，所以说，不同功能的规则，我们可以放置在不同的表中进行管理，而iptables已经为我们定义了4种表，每种表对应了不同的功能，而我们定义的规则也都逃脱不了这4种功能的范围，所以，学习iptables之前，我们必须先搞明白每种表 的作用。</p><p>iptables为我们提供了如下规则的分类，或者说，iptables为我们提供了如下”表”</p><p>filter表：负责过滤功能，防火墙；内核模块：iptables_filter</p><p>nat表：network address translation，网络地址转换功能；内核模块：iptable_nat</p><p>mangle表：拆解报文，做出修改，并重新封装 的功能；iptable_mangle</p><p>raw表：关闭nat表上启用的连接追踪机制；iptable_raw</p><p>也就是说，我们自定义的所有规则，都是这四种分类中的规则，或者说，所有规则都存在于这4张”表”中。</p><h2 id=表链关系>表链关系</h2><p>但是我们需要注意的是，某些”链”中注定不会包含”某类规则”，就像某些”关卡”天生就不具备某些功能一样，比如，A”关卡”只负责打击陆地敌人，没有防空能力，B”关卡”只负责打击空中敌人，没有防御步兵的能力，C”关卡”可能比较NB，既能防空，也能防御陆地敌人，D”关卡”最屌，海陆空都能防。</p><p>那让我们来看看，每个”关卡”都有哪些能力，或者说，让我们看看每个”链”上的规则都存在于哪些”表”中。</p><p>我们还是以图为例，先看看prerouting”链”上的规则都存在于哪些表中。</p><p>注意：下图只用于说明prerouting链上的规则存在于哪些表中，并没有描述表的顺序。</p><p><img class=mx-auto alt=021217_0051_4.png src=https://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_4.png></p><p>这幅图是什么意思呢？它的意思是说，prerouting”链”只拥有nat表、raw表和mangle表所对应的功能，所以，prerouting中的规则只能存放于nat表、raw表和mangle表中。</p><p>那么，根据上述思路，我们来总结一下，每个”关卡”都拥有什么功能，</p><p>或者说，每个”链”中的规则都存在于哪些”表”中。</p><p>PREROUTING 的规则可以存在于：raw表，mangle表，nat表。</p><p>INPUT 的规则可以存在于：mangle表，filter表，（centos7中还有nat表，centos6中没有）。</p><p>FORWARD 的规则可以存在于：mangle表，filter表。</p><p>OUTPUT 的规则可以存在于：raw表mangle表，nat表，filter表。</p><p>POSTROUTING 的规则可以存在于：mangle表，nat表。</p><p>但是，我们在实际的使用过程中，往往是通过”表”作为操作入口，对规则进行定义的，之所以按照上述过程介绍iptables，是因为从”关卡”的角度更容易从入门的角度理解，但是为了以便在实际使用的时候，更加顺畅的理解它们，此处我们还要将各”表”与”链”的关系罗列出来，</p><p>表（功能）&lt;–> 链（钩子）：</p><p>raw 表中的规则可以被哪些链使用：PREROUTING，OUTPUT</p><p>mangle 表中的规则可以被哪些链使用：PREROUTING，INPUT，FORWARD，OUTPUT，POSTROUTING</p><p>nat 表中的规则可以被哪些链使用：PREROUTING，OUTPUT，POSTROUTING（centos7中还有INPUT，centos6中没有）</p><p>filter 表中的规则可以被哪些链使用：INPUT，FORWARD，OUTPUT</p><p>其实我们还需要注意一点，因为数据包经过一个”链”的时候，会将当前链的所有规则都匹配一遍，但是匹配时总归要有顺序，我们应该一条一条的去匹配，而且我们说过，相同功能类型的规则会汇聚在一张”表”中，那么，哪些”表”中的规则会放在”链”的最前面执行呢，这时候就需要有一个优先级的问题，我们还拿prerouting”链”做图示。</p><p><img class=mx-auto alt=021217_0051_5 src=https://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_5.png></p><p>prerouting链中的规则存放于三张表中，而这三张表中的规则执行的优先级如下：</p><p>raw –> mangle –> nat</p><p>但是我们知道，iptables为我们定义了4张”表”,当他们处于同一条”链”时，执行的优先级如下。</p><p>优先级次序（由高而低）：</p><p>raw –> mangle –> nat –> filter</p><p>但是我们前面说过，某些链天生就不能使用某些表中的规则，所以，4张表中的规则处于同一条链的目前只有output链，它就是传说中海陆空都能防守的关卡。</p><p>为了更方便的管理，我们还可以在某个表里面创建自定义链，将针对某个应用程序所设置的规则放置在这个自定义链中，但是自定义链接不能直接使用，只能被某个默认的链当做动作去调用才能起作用，我们可以这样想象，自定义链就是一段比较”短”的链子，这条”短”链子上的规则都是针对某个应用程序制定的，但是这条短的链子并不能直接使用，而是需要”焊接”在iptables默认定义链子上，才能被IPtables使用，这就是为什么默认定义的”链”需要把”自定义链”当做”动作”去引用的原因。这是后话，后面再聊，在实际使用时我们即可更加的明白。</p><h2 id=数据经过防火墙的流程>数据经过防火墙的流程</h2><p>结合上述所有的描述，我们可以将数据包通过防火墙的流程总结为下图：</p><p><img class=mx-auto alt=021217_0051_6.png src=https://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_6.png></p><p>我们在写Iptables规则的时候，要时刻牢记这张路由次序图，灵活配置规则。</p><p>我们将经常用到的对应关系重新写在此处，方便对应图例查看。</p><p>链的规则存放于哪些表中（从链到表的对应关系）：</p><p>PREROUTING 的规则可以存在于：raw表，mangle表，nat表。</p><p>INPUT 的规则可以存在于：mangle表，filter表，（centos7中还有nat表，centos6中没有）。</p><p>FORWARD 的规则可以存在于：mangle表，filter表。</p><p>OUTPUT 的规则可以存在于：raw表mangle表，nat表，filter表。</p><p>POSTROUTING 的规则可以存在于：mangle表，nat表。</p><p>表中的规则可以被哪些链使用（从表到链的对应关系）：</p><p>raw 表中的规则可以被哪些链使用：PREROUTING，OUTPUT</p><p>mangle 表中的规则可以被哪些链使用：PREROUTING，INPUT，FORWARD，OUTPUT，POSTROUTING</p><p>nat 表中的规则可以被哪些链使用：PREROUTING，OUTPUT，POSTROUTING（centos7中还有INPUT，centos6中没有）</p><p>filter 表中的规则可以被哪些链使用：INPUT，FORWARD，OUTPUT</p><p>下图中nat表在centos7中的情况就不再标明。</p><p><img class=mx-auto alt=021217_0051_7.png src=https://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_7.png></p><h2 id=规则的概念>规则的概念</h2><p>说了一圈又说回来了，在上述描述中我们一直在提规则，可是没有细说，现在说说它。</p><p>先说说规则的概念，然后再通俗的解释它。</p><p>规则：根据指定的匹配条件来尝试匹配每个流经此处的报文，一旦匹配成功，则由规则后面指定的处理动作进行处理；</p><p>那么我们来通俗的解释一下什么是iptables的规则，之前打过一个比方，每条”链”都是一个”关卡”，每个通过这个”关卡”的报文都要匹配这个关卡上的规则，如果匹配，则对报文进行对应的处理，比如说，你我二人此刻就好像两个”报文”，你我二人此刻都要入关，可是城主有命，只有器宇轩昂的人才能入关，不符合此条件的人不能入关，于是守关将士按照城主制定的”规则”，开始打量你我二人，最终，你顺利入关了，而我已被拒之门外，因为你符合”器宇轩昂”的标准，所以把你”放行”了，而我不符合标准，所以没有被放行，其实，”器宇轩昂”就是一种”匹配条件”，”放行”就是一种”动作”，”匹配条件”与”动作”组成了规则。</p><p>了解了规则的概念，那我们来聊聊规则的组成部分,此处只是大概的将规则的结构列出，后面的文章中会单独对规则进行总结。</p><p>规则由匹配条件和处理动作组成。</p><p>匹配条件
匹配条件分为基本匹配条件与扩展匹配条件</p><p>基本匹配条件：</p><p>源地址Source IP，目标地址 Destination IP</p><p>上述内容都可以作为基本匹配条件。</p><p>扩展匹配条件：</p><p>除了上述的条件可以用于匹配，还有很多其他的条件可以用于匹配，这些条件泛称为扩展条件，这些扩展条件其实也是netfilter中的一部分，只是以模块的形式存在，如果想要使用这些条件，则需要依赖对应的扩展模块。</p><p>源端口Source Port, 目标端口Destination Port</p><p>上述内容都可以作为扩展匹配条件</p><p>处理动作
处理动作在iptables中被称为target（这样说并不准确，我们暂且这样称呼），动作也可以分为基本动作和扩展动作。</p><p>此处列出一些常用的动作，之后的文章会对它们进行详细的示例与总结：</p><p>ACCEPT：允许数据包通过。</p><p>DROP：直接丢弃数据包，不给任何回应信息，这时候客户端会感觉自己的请求泥牛入海了，过了超时时间才会有反应。</p><p>REJECT：拒绝数据包通过，必要时会给数据发送端一个响应的信息，客户端刚请求就会收到拒绝的信息。</p><p>SNAT：源地址转换，解决内网用户用同一个公网地址上网的问题。</p><p>MASQUERADE：是SNAT的一种特殊形式，适用于动态的、临时会变的ip上。</p><p>DNAT：目标地址转换。</p><p>REDIRECT：在本机做端口映射。</p><p>LOG：在/var/log/messages文件中记录日志信息，然后将数据包传递给下一条规则，也就是说除了记录以外不对数据包做任何其他操作，仍然让下一条规则去匹配。</p></div><div class=post-archive><ul class=post-copyright><img src=/mp/qrcode.png><br><li><strong>原文链接：</strong><a href=https://typonotes.com/posts/2021/06/25/linux-iptable-introduce/>https://typonotes.com/posts/2021/06/25/linux-iptable-introduce/</a></li><li>本文为原创文章，转载注明出处。</li><li>欢迎 <strong>扫码关注公众号</strong>
<span style=background-color:#e8e8e9><code>Go与云原生</code></span>
或 <strong>订阅网站</strong>
<span style=background-color:#e8e8e9><a href=https://typonotes.com/>https://typonotes.com/</a></span>
。</li><li>第一时间看后续精彩文章。觉得好的话，请猛击文章右下角「在看」，感谢支持。</li><li style=word-break:break-all></li></ul><br></div><div class=post-archive><h2>相关文章</h2><ul class=listing><li><a href=/posts/2017/08/31/iptables-basic-theory-and-useage/>iptables 基础知识和基本用法</a></li></ul></div><div class="post-meta meta-tags"><ul class=clearfix><li><a href=/tags/iptables target=_blank>iptables</a></li></ul></div></article><div class="post bg-white"><script src=https://utteranc.es/client.js repo=tangx/tangx.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><footer id=footer><div>&copy; 2025 <a href=https://typonotes.com/>老麦的书房 By 老麦</a>
| <a rel=nofollow target=_blank href=http://beian.miit.gov.cn/>蜀ICP备16002016号</a></div><br><div><div class=github-badge><a href=https://gohugo.io/ target=_black rel=nofollow><span class=badge-subject>Powered by</span><span class="badge-value bg-blue">Hugo</span></a></div><div class=github-badge><a href=https://tangx.in/ target=_black><span class=badge-subject>Design by</span><span class="badge-value bg-brightgreen">老麦</span></a></div><div class=github-badge><a href=https://github.com/tangx/maupassant-hugo target=_black><span class=badge-subject>Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a></div></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[["$","$"]],processEscapes:!0}}</script><script src='/cdn/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
<a id=rocket href=#top></a>
<script type=text/javascript src='/js/totop.js?v=0.0.0' async></script><style type=text/css>div.highlight{position:relative;margin:1em 0}.copy-code{display:none;position:absolute;top:4px;right:4px;color:rgba(255,255,255,.8);background:rgba(78,78,78,.8);border-radius:var(--radius);padding:0 5px;font:inherit;user-select:none;cursor:pointer;border:0;--radius:8px}div.highlight:hover .copy-code,pre:hover .copy-code{display:block}</style><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script type=text/javascript src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async></script></div><div id=secondary><section class=widget></section><section class=widget><section class=widget><h3 class=widget-title style=color:red>福利派送</h3><ul class=widget-list><li><p style=color:red><strong>（免费星球）「运维成长路线」</strong></p><a href=https://wx.zsxq.com/ title=（免费星球）「运维成长路线」 target=_blank style=color:red><img src=/assets/tttuigguang/devops-camp-01.jpeg></a></li><li><p style=color:red><strong>又拍云免费 CDN</strong></p><a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" title="又拍云免费 CDN" target=_blank style=color:red><img src=/assets/tttuigguang/upyun.png></a></li></ul></section></section><section class=widget><h3 class=widget-title>最近文章</h3><ul class=widget-list><li><a href=https://typonotes.com/posts/2025/03/01/intro-of-npm-package-publish/ title="Typescript NPM 制包/发包问题解析" target=_blank>Typescript NPM 制包/发包问题解析</a></li><li><a href=https://typonotes.com/posts/2025/02/09/gin-static-fs-301-redirect/ title="(6) 静态前端网站容器化 - 【源码解读】 使用 gin FS 模式为什么无限 301 重定向了？" target=_blank>(6) 静态前端网站容器化 - 【源码解读】 使用 gin FS 模式为什么无限 301 重定向了？</a></li><li><a href=https://typonotes.com/posts/2025/02/09/static-sap-dockerize-customize-httpserve/ title="(5) 静态前端网站容器化 - 容器篇 - 自定义 HTTP Server" target=_blank>(5) 静态前端网站容器化 - 容器篇 - 自定义 HTTP Server</a></li><li><a href=https://typonotes.com/posts/2025/02/09/static-sap-history-api-fallback-issue/ title="(4) 静态前端容器化 - 单页面应用(SAP) History API Fallback - 刷新 404" target=_blank>(4) 静态前端容器化 - 单页面应用(SAP) History API Fallback - 刷新 404</a></li><li><a href=https://typonotes.com/posts/2024/12/16/static-website-container-image/ title="(3) 静态前端网站容器化 - 容器篇" target=_blank>(3) 静态前端网站容器化 - 容器篇</a></li><li><a href=https://typonotes.com/posts/2024/12/02/python-select-interpreter-in-vscode/ title="Python: VsCode 中指定执行版本" target=_blank>Python: VsCode 中指定执行版本</a></li><li><a href=https://typonotes.com/posts/2024/11/29/python-package-module-quick-start/ title="Python: 关于 Package 和 Module 快速入门" target=_blank>Python: 关于 Package 和 Module 快速入门</a></li><li><a href=https://typonotes.com/posts/2024/11/28/docker-set-up-client-only/ title="Docker Set Up Client Only" target=_blank>Docker Set Up Client Only</a></li><li><a href=https://typonotes.com/posts/2024/11/23/python-hint-typed-dict/ title="Python 类型提示: Typed Dict" target=_blank>Python 类型提示: Typed Dict</a></li><li><a href=https://typonotes.com/posts/2024/11/22/python-pip-conf/ title="Python pip 源配置" target=_blank>Python pip 源配置</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/categories/>分类</a></h3><ul class=widget-list><li><a href=https://typonotes.com/categories/linux/>linux (1)</a></li><li><a href=https://typonotes.com/categories/aliyun/>aliyun (3)</a></li><li><a href=https://typonotes.com/categories/aws/>aws (2)</a></li><li><a href=https://typonotes.com/categories/blog/>blog (11)</a></li><li><a href=https://typonotes.com/categories/books/>books (13)</a></li><li><a href=https://typonotes.com/categories/cloudnative/>cloudnative (9)</a></li><li><a href=https://typonotes.com/categories/database/>database (6)</a></li><li><a href=https://typonotes.com/categories/devops/>devops (1)</a></li><li><a href=https://typonotes.com/categories/devops-camp/>devops-camp (2)</a></li><li><a href=https://typonotes.com/categories/devopscamp/>devopscamp (10)</a></li><li><a href=https://typonotes.com/categories/docker/>docker (11)</a></li><li><a href=https://typonotes.com/categories/dockerize/>dockerize (4)</a></li><li><a href=https://typonotes.com/categories/english/>english (2)</a></li><li><a href=https://typonotes.com/categories/gitlab/>gitlab (1)</a></li><li><a href=https://typonotes.com/categories/golang/>golang (15)</a></li><li><a href=https://typonotes.com/categories/heroku/>heroku (1)</a></li><li><a href=https://typonotes.com/categories/istio/>istio (16)</a></li><li><a href=https://typonotes.com/categories/k8sailor/>k8sailor (19)</a></li><li><a href=https://typonotes.com/categories/kubebuilder-zero-to-one/>kubebuilder-zero-to-one (15)</a></li><li><a href=https://typonotes.com/categories/kubernetes/>kubernetes (53)</a></li><li><a href=https://typonotes.com/categories/linux/>linux (7)</a></li><li><a href=https://typonotes.com/categories/logging/>logging (3)</a></li><li><a href=https://typonotes.com/categories/monitor/>monitor (8)</a></li><li><a href=https://typonotes.com/categories/nginx/>nginx (2)</a></li><li><a href=https://typonotes.com/categories/node/>node (1)</a></li><li><a href=https://typonotes.com/categories/nodejs/>nodejs (2)</a></li><li><a href=https://typonotes.com/categories/only-one/>only-one (7)</a></li><li><a href=https://typonotes.com/categories/opentelemetry/>opentelemetry (1)</a></li><li><a href=https://typonotes.com/categories/python/>python (8)</a></li><li><a href=https://typonotes.com/categories/redis/>redis (2)</a></li><li><a href=https://typonotes.com/categories/sharing/>sharing (4)</a></li><li><a href=https://typonotes.com/categories/shell/>shell (1)</a></li><li><a href=https://typonotes.com/categories/vue3/>vue3 (2)</a></li><li><a href=https://typonotes.com/categories/%E5%91%BD%E4%BB%A4%E5%B7%A5%E5%85%B7/>命令工具 (1)</a></li><li><a href=https://typonotes.com/categories/%E9%9A%8F%E7%AC%94/>随笔 (1)</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/tags/>标签</a></h3><div class=tagcloud><a href=https://typonotes.com/tags/MSSQL/>MSSQL</a>
<a href=https://typonotes.com/tags/SQL%E6%B3%A8%E5%85%A5/>SQL注入</a>
<a href=https://typonotes.com/tags/XSS/>XSS</a>
<a href=https://typonotes.com/tags/XXE/>XXE</a>
<a href=https://typonotes.com/tags/aliyun/>aliyun</a>
<a href=https://typonotes.com/tags/ansible/>ansible</a>
<a href=https://typonotes.com/tags/apt/>apt</a>
<a href=https://typonotes.com/tags/aws/>aws</a>
<a href=https://typonotes.com/tags/axios/>axios</a>
<a href=https://typonotes.com/tags/backup/>backup</a>
<a href=https://typonotes.com/tags/blog/>blog</a>
<a href=https://typonotes.com/tags/calico/>calico</a>
<a href=https://typonotes.com/tags/cdn/>cdn</a>
<a href=https://typonotes.com/tags/cephfs/>cephfs</a>
<a href=https://typonotes.com/tags/cfssl/>cfssl</a>
<a href=https://typonotes.com/tags/chatgpt/>chatgpt</a>
<a href=https://typonotes.com/tags/cicd/>cicd</a>
<a href=https://typonotes.com/tags/cli/>cli</a>
<a href=https://typonotes.com/tags/cli-tools/>cli-tools</a>
<a href=https://typonotes.com/tags/client/>client</a>
<a href=https://typonotes.com/tags/cloudnative/>cloudnative</a>
<a href=https://typonotes.com/tags/cobra/>cobra</a>
<a href=https://typonotes.com/tags/code/>code</a>
<a href=https://typonotes.com/tags/command/>command</a>
<a href=https://typonotes.com/tags/config/>config</a>
<a href=https://typonotes.com/tags/configmap/>configmap</a>
<a href=https://typonotes.com/tags/context/>context</a>
<a href=https://typonotes.com/tags/coredns/>coredns</a>
<a href=https://typonotes.com/tags/database/>database</a>
<a href=https://typonotes.com/tags/defer/>defer</a>
<a href=https://typonotes.com/tags/deployment/>deployment</a>
<a href=https://typonotes.com/tags/devkit/>devkit</a>
<a href=https://typonotes.com/tags/dict/>dict</a>
<a href=https://typonotes.com/tags/dind/>dind</a>
<a href=https://typonotes.com/tags/dns/>dns</a>
<a href=https://typonotes.com/tags/dnsx/>dnsx</a>
<a href=https://typonotes.com/tags/docker/>docker</a>
<a href=https://typonotes.com/tags/docker-compose/>docker-compose</a>
<a href=https://typonotes.com/tags/dockerfile/>dockerfile</a>
<a href=https://typonotes.com/tags/download/>download</a>
<a href=https://typonotes.com/tags/ec2/>ec2</a>
<a href=https://typonotes.com/tags/english/>english</a>
<a href=https://typonotes.com/tags/extension/>extension</a>
<a href=https://typonotes.com/tags/filebeat/>filebeat</a>
<a href=https://typonotes.com/tags/find/>find</a>
<a href=https://typonotes.com/tags/gin/>gin</a>
<a href=https://typonotes.com/tags/git/>git</a>
<a href=https://typonotes.com/tags/github/>github</a>
<a href=https://typonotes.com/tags/gitlab/>gitlab</a>
<a href=https://typonotes.com/tags/glusterfs/>glusterfs</a>
<a href=https://typonotes.com/tags/golang/>golang</a>
<a href=https://typonotes.com/tags/gorm/>gorm</a>
<a href=https://typonotes.com/tags/grafana/>grafana</a>
<a href=https://typonotes.com/tags/grep/>grep</a>
<a href=https://typonotes.com/tags/haproxy/>haproxy</a>
<a href=https://typonotes.com/tags/hint/>hint</a>
<a href=https://typonotes.com/tags/html/>html</a>
<a href=https://typonotes.com/tags/http/>http</a>
<a href=https://typonotes.com/tags/https/>https</a>
<a href=https://typonotes.com/tags/hugo/>hugo</a>
<a href=https://typonotes.com/tags/image/>image</a>
<a href=https://typonotes.com/tags/informer/>informer</a>
<a href=https://typonotes.com/tags/ingress/>ingress</a>
<a href=https://typonotes.com/tags/interface/>interface</a>
<a href=https://typonotes.com/tags/iptables/>iptables</a>
<a href=https://typonotes.com/tags/istio/>istio</a>
<a href=https://typonotes.com/tags/jira/>jira</a>
<a href=https://typonotes.com/tags/json/>json</a>
<a href=https://typonotes.com/tags/k3s/>k3s</a>
<a href=https://typonotes.com/tags/k8s/>k8s</a>
<a href=https://typonotes.com/tags/keywords/>keywords</a>
<a href=https://typonotes.com/tags/kubebuilder/>kubebuilder</a>
<a href=https://typonotes.com/tags/kubectl/>kubectl</a>
<a href=https://typonotes.com/tags/kustomize/>kustomize</a>
<a href=https://typonotes.com/tags/kustz/>kustz</a>
<a href=https://typonotes.com/tags/layout/>layout</a>
<a href=https://typonotes.com/tags/lego/>lego</a>
<a href=https://typonotes.com/tags/libaray/>libaray</a>
<a href=https://typonotes.com/tags/library/>library</a>
<a href=https://typonotes.com/tags/linux/>linux</a>
<a href=https://typonotes.com/tags/log/>log</a>
<a href=https://typonotes.com/tags/minio/>minio</a>
<a href=https://typonotes.com/tags/module/>module</a>
<a href=https://typonotes.com/tags/mysql/>mysql</a>
<a href=https://typonotes.com/tags/network/>network</a>
<a href=https://typonotes.com/tags/nginx/>nginx</a>
<a href=https://typonotes.com/tags/nodejs/>nodejs</a>
<a href=https://typonotes.com/tags/npm/>npm</a>
<a href=https://typonotes.com/tags/openai/>openai</a>
<a href=https://typonotes.com/tags/opentelemetry/>opentelemetry</a>
<a href=https://typonotes.com/tags/package/>package</a>
<a href=https://typonotes.com/tags/pgsql/>pgsql</a>
<a href=https://typonotes.com/tags/php/>php</a>
<a href=https://typonotes.com/tags/pigar/>pigar</a>
<a href=https://typonotes.com/tags/pip/>pip</a>
<a href=https://typonotes.com/tags/pipreqs/>pipreqs</a>
<a href=https://typonotes.com/tags/prisma/>prisma</a>
<a href=https://typonotes.com/tags/prometheus/>prometheus</a>
<a href=https://typonotes.com/tags/proxy/>proxy</a>
<a href=https://typonotes.com/tags/python/>python</a>
<a href=https://typonotes.com/tags/pyyaml/>pyyaml</a>
<a href=https://typonotes.com/tags/qcloud/>qcloud</a>
<a href=https://typonotes.com/tags/qiniu/>qiniu</a>
<a href=https://typonotes.com/tags/qos/>qos</a>
<a href=https://typonotes.com/tags/react/>react</a>
<a href=https://typonotes.com/tags/readonly/>readonly</a>
<a href=https://typonotes.com/tags/redis/>redis</a>
<a href=https://typonotes.com/tags/reflect/>reflect</a>
<a href=https://typonotes.com/tags/repo/>repo</a>
<a href=https://typonotes.com/tags/resetful/>resetful</a>
<a href=https://typonotes.com/tags/s3/>s3</a>
<a href=https://typonotes.com/tags/sap/>sap</a>
<a href=https://typonotes.com/tags/sap-dockerize/>sap-dockerize</a>
<a href=https://typonotes.com/tags/scope/>scope</a>
<a href=https://typonotes.com/tags/security-group/>security-group</a>
<a href=https://typonotes.com/tags/semimonthly-plan/>semimonthly-plan</a>
<a href=https://typonotes.com/tags/service/>service</a>
<a href=https://typonotes.com/tags/shell/>shell</a>
<a href=https://typonotes.com/tags/slice/>slice</a>
<a href=https://typonotes.com/tags/sqlmap/>sqlmap</a>
<a href=https://typonotes.com/tags/ssl/>ssl</a>
<a href=https://typonotes.com/tags/storage/>storage</a>
<a href=https://typonotes.com/tags/tag01/>tag01</a>
<a href=https://typonotes.com/tags/tag02/>tag02</a>
<a href=https://typonotes.com/tags/tech-sharing/>tech-sharing</a>
<a href=https://typonotes.com/tags/test/>test</a>
<a href=https://typonotes.com/tags/tidb/>tidb</a>
<a href=https://typonotes.com/tags/time/>time</a>
<a href=https://typonotes.com/tags/timezone/>timezone</a>
<a href=https://typonotes.com/tags/tls/>tls</a>
<a href=https://typonotes.com/tags/tools/>tools</a>
<a href=https://typonotes.com/tags/trace/>trace</a>
<a href=https://typonotes.com/tags/try...catch/>try...catch</a>
<a href=https://typonotes.com/tags/typescript/>typescript</a>
<a href=https://typonotes.com/tags/typora/>typora</a>
<a href=https://typonotes.com/tags/v2ray/>v2ray</a>
<a href=https://typonotes.com/tags/variable/>variable</a>
<a href=https://typonotes.com/tags/verbs/>verbs</a>
<a href=https://typonotes.com/tags/vscode/>vscode</a>
<a href=https://typonotes.com/tags/vue/>vue</a>
<a href=https://typonotes.com/tags/vue3/>vue3</a>
<a href=https://typonotes.com/tags/website/>website</a>
<a href=https://typonotes.com/tags/yaml/>yaml</a>
<a href=https://typonotes.com/tags/%E5%89%8D%E7%AB%AF/>前端</a>
<a href=https://typonotes.com/tags/%E5%8F%8D%E5%B0%84/>反射</a>
<a href=https://typonotes.com/tags/%E5%AE%89%E5%85%A8/>安全</a>
<a href=https://typonotes.com/tags/%E7%9F%A5%E8%AF%86%E6%98%9F%E7%90%83/>知识星球</a>
<a href=https://typonotes.com/tags/%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/>配置管理</a></div></section><section class=widget><h3 class=widget-title>其它</h3><ul class=widget-list><li><a href=https://typonotes.com/%20index.xml>文章 RSS</a></li></ul></section></div></div></div></div></body></html>